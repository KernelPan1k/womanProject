{% extends 'ProjectBackBundle:Default:base.html.twig' %}
{% block content %}
    <div class="">
        <div class="page-title">
            <div class="title_left">
                <h3>Profil de {{ object.username }}</h3>
            </div>
        </div>
        <div class="clearfix"></div>
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <h2>Informations personnelles
                        </h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li><a title="{{ object.locked ? 'Débloquer' : 'Bloquer' }} l'utilisateur"
                                   onclick="return confirm('Etes vous sur ?')"
                                   href="{{ path('project_back_user_lock', {'id' : object.id, 'token': csrf_token('user_lock_'~ object.id)}) }}">
                                    <i {{ object.locked ? 'style="color:red" ' : '' }}class="fa fa-lock"></i>
                                </a>
                            </li>
                            <li>
                                <a title="Editer l'utilisateur"
                                   href="{{ path('project_back_user_edit', {'id' : object.id}) }}"
                                   class="close-link"><i class="fa fa-edit"></i>
                                </a>
                            </li>
                            <li>
                                <a title="Supprimer l'utilisateur"
                                   onclick="return confirm('!!! Etes vous sur ?')"
                                   href="{{ path('project_back_user_remove', {'id' : object.id, 'token': csrf_token('user_remove_'~object.id)}) }}"
                                ><i class="fa fa-close"></i>
                                </a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <div class="col-md-3 col-sm-3 col-xs-12 profile_left">
                            <div class="profile_img">
                                <div id="crop-avatar">
                                    {% set avatar =
                                    (object.img is not null)
                                    ? (object.getAvatarPath()|imagine_filter('medium'))
                                    : asset('bundles/projectfront/images/avatar.jpg') %}
                                    <div class="fix-overlay">
                                        <a class="overlay-link" data-upload="avatar"><i
                                                    class="icon-overlay fa fa-edit"></i></a>
                                        <img title="Avatar"
                                             alt="Avatar" src="{{ avatar }}"
                                             class="img-responsive avatar-view img-center">
                                    </div>
                                </div>
                            </div>
                            <h3>{{ object.username }}</h3>
                            <ul class="list-unstyled user_data">
                                <li>
                                    <i class="fa fa-sort-numeric-asc user-profile-icon"></i> id: {{ object.id }}
                                </li>
                                <li>
                                    <i class="fa fa-user user-profile-icon"></i> {{ object.firstName ~ ' ' ~ object.lastName }}
                                </li>
                                <li>
                                    <i class="fa fa-map-marker user-profile-icon"></i>
                                    {{ (object.city is not null) ? object.city.name ~ ' ' ~ object.city.region.name :'Inconnue' }}
                                </li>
                                <li>
                                    <i class="fa fa-calendar user-profile-icon"></i> née
                                    le {{ object.dateOfBirth|date('d/m/Y') }}
                                </li>
                                <li>
                                    <i class="fa fa-calendar-o user-profile-icon"></i> inscrite le :
                                    {{ object.createdAt|date('d/m/Y') }}
                                </li>
                                <li class="m-top-xs">
                                    <i class="fa fa-external-link user-profile-icon"></i>
                                    <a target="_blank"
                                       href="{{ path('application_userbundle_user_public_profil', {'slug' : object.slug}) }}">Profil
                                        public</a>
                                </li>
                            </ul>
                            <a class="btn btn-success" href="{{ path('project_back_user_edit', {'id' : object.id }) }}">
                                <i class="fa fa-edit m-right-xs"></i>Editer le Profil
                            </a>
                            <br>
                            <br>
                            <h4>
                                Centres d'interets
                            </h4>
                            <div class="bs-example-popovers">
                                {% for category in object.categorys %}
                                    <button type="button"
                                            class="btn btn-default"
                                            data-container="body"
                                            data-toggle="popover"
                                            data-placement="left"
                                            data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."
                                            data-original-title=""
                                            title="">
                                        {{ category.name }}
                                    </button>
                                {% else %}
                                    <p>
                                        Aucun centre d'interet actuellement
                                    </p>
                                {% endfor %}
                            </div>
                            <br>
                            <h4>Description</h4>
                            <p>
                                {{ object.description|nl2br }}
                            </p>
                            <br>
                            <h4>Etat du profil</h4>
                            <ul class="list-unstyled user_data">
                                {% if mandatory|length>0 %}
                                    {% for m in mandatory %}
                                        <li>
                                            <p>{{ m.message }}</p>
                                            <div class="progress progress_sm">
                                                <div data-transitiongoal="100" role="progressbar"
                                                     class="progress-bar bg-red"
                                                     style="width: 100%;" aria-valuenow="100"></div>
                                            </div>
                                        </li>
                                    {% endfor %}
                                {% else %}
                                    <li>
                                        <p>Le profil est complet</p>
                                        <div class="progress progress_sm">
                                            <div data-transitiongoal="100" role="progressbar"
                                                 class="progress-bar bg-green"
                                                 style="width: 100%;" aria-valuenow="100"></div>
                                        </div>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <div class="profile_title">
                                <div class="col-md-6">
                                    <h2>Autre informations</h2>
                                </div>
                                <div class="col-md-6">
                                    <div style="margin-top: 5px; background: {{ object.lastLogin is not null ? '#fff' : '#FFAFAF' }}; cursor: pointer; padding: 5px 10px; border: 1px solid #E6E9ED"
                                         class="pull-right" id="reportrange">
                                        <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                                        <span>Dernière connexion le :
                                            {{ object.lastLogin is not null ? object.lastLogin|date('d/m/Y') : 'Jamais' }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                            {% set background =
                            (object.bigImg is not null)
                            ? (object.getBackgroundPath()|imagine_filter('background'))
                            : 'bundles/projectfront/images/page-about-me-banner.jpg' %}
                            <div
                                    style="width: 100%;
                                            height: 280px;
                                            position: relative;
                                            background-image:url({{ asset(background) }});
                                            background-size: cover;"
                                    id="graph_bar">
                                <a class="overlay-link" data-upload="background"><i class="icon-overlay fa fa-edit"></i></a>
                            </div>
                            <div data-example-id="togglable-tabs" role="tabpanel" class="">
                                <ul role="tablist" class="nav nav-tabs bar_tabs" id="myTab">
                                    <li class="active" role="presentation"><a aria-expanded="true" data-toggle="tab"
                                                                              role="tab" id="home-tab"
                                                                              href="#tab_content1">Recent Activity</a>
                                    </li>
                                    <li class="" role="presentation"><a aria-expanded="false" data-toggle="tab"
                                                                        id="profile-tab" role="tab"
                                                                        href="#tab_content2">Projects Worked on</a>
                                    </li>
                                    <li class="" role="presentation"><a aria-expanded="false" data-toggle="tab"
                                                                        id="profile-tab2" role="tab"
                                                                        href="#tab_content3">Profile</a>
                                    </li>
                                </ul>
                                <div class="tab-content" id="myTabContent">
                                    <div aria-labelledby="home-tab" id="tab_content1" class="tab-pane fade active in"
                                         role="tabpanel">

                                        <!-- start recent activity -->
                                        <ul class="messages">
                                            <li>
                                                <img alt="Avatar" class="avatar" src="images/img.jpg">
                                                <div class="message_date">
                                                    <h3 class="date text-info">24</h3>
                                                    <p class="month">May</p>
                                                </div>
                                                <div class="message_wrapper">
                                                    <h4 class="heading">Desmond Davison</h4>
                                                    <blockquote class="message">Raw denim you probably haven't heard of
                                                        them jean shorts Austin. Nesciunt tofu stumptown aliqua butcher
                                                        retro keffiyeh dreamcatcher synth.
                                                    </blockquote>
                                                    <br>
                                                    <p class="url">
                                                        <span data-icon="" aria-hidden="true"
                                                              class="fs1 text-info"></span>
                                                        <a href="#"><i class="fa fa-paperclip"></i> User Acceptance
                                                            Test.doc </a>
                                                    </p>
                                                </div>
                                            </li>
                                            <li>
                                                <img alt="Avatar" class="avatar" src="images/img.jpg">
                                                <div class="message_date">
                                                    <h3 class="date text-error">21</h3>
                                                    <p class="month">May</p>
                                                </div>
                                                <div class="message_wrapper">
                                                    <h4 class="heading">Brian Michaels</h4>
                                                    <blockquote class="message">Raw denim you probably haven't heard of
                                                        them jean shorts Austin. Nesciunt tofu stumptown aliqua butcher
                                                        retro keffiyeh dreamcatcher synth.
                                                    </blockquote>
                                                    <br>
                                                    <p class="url">
                                                        <span data-icon="" aria-hidden="true" class="fs1"></span>
                                                        <a data-original-title="" href="#">Download</a>
                                                    </p>
                                                </div>
                                            </li>
                                            <li>
                                                <img alt="Avatar" class="avatar" src="images/img.jpg">
                                                <div class="message_date">
                                                    <h3 class="date text-info">24</h3>
                                                    <p class="month">May</p>
                                                </div>
                                                <div class="message_wrapper">
                                                    <h4 class="heading">Desmond Davison</h4>
                                                    <blockquote class="message">Raw denim you probably haven't heard of
                                                        them jean shorts Austin. Nesciunt tofu stumptown aliqua butcher
                                                        retro keffiyeh dreamcatcher synth.
                                                    </blockquote>
                                                    <br>
                                                    <p class="url">
                                                        <span data-icon="" aria-hidden="true"
                                                              class="fs1 text-info"></span>
                                                        <a href="#"><i class="fa fa-paperclip"></i> User Acceptance
                                                            Test.doc </a>
                                                    </p>
                                                </div>
                                            </li>
                                            <li>
                                                <img alt="Avatar" class="avatar" src="images/img.jpg">
                                                <div class="message_date">
                                                    <h3 class="date text-error">21</h3>
                                                    <p class="month">May</p>
                                                </div>
                                                <div class="message_wrapper">
                                                    <h4 class="heading">Brian Michaels</h4>
                                                    <blockquote class="message">Raw denim you probably haven't heard of
                                                        them jean shorts Austin. Nesciunt tofu stumptown aliqua butcher
                                                        retro keffiyeh dreamcatcher synth.
                                                    </blockquote>
                                                    <br>
                                                    <p class="url">
                                                        <span data-icon="" aria-hidden="true" class="fs1"></span>
                                                        <a data-original-title="" href="#">Download</a>
                                                    </p>
                                                </div>
                                            </li>

                                        </ul>
                                        <!-- end recent activity -->

                                    </div>
                                    <div aria-labelledby="profile-tab" id="tab_content2" class="tab-pane fade"
                                         role="tabpanel">

                                        <!-- start user projects -->
                                        <table class="data table table-striped no-margin">
                                            <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Project Name</th>
                                                <th>Client Company</th>
                                                <th class="hidden-phone">Hours Spent</th>
                                                <th>Contribution</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>New Company Takeover Review</td>
                                                <td>Deveint Inc</td>
                                                <td class="hidden-phone">18</td>
                                                <td class="vertical-align-mid">
                                                    <div class="progress">
                                                        <div data-transitiongoal="35"
                                                             class="progress-bar progress-bar-success"
                                                             style="width: 35%;" aria-valuenow="35"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>New Partner Contracts Consultanci</td>
                                                <td>Deveint Inc</td>
                                                <td class="hidden-phone">13</td>
                                                <td class="vertical-align-mid">
                                                    <div class="progress">
                                                        <div data-transitiongoal="15"
                                                             class="progress-bar progress-bar-danger"
                                                             style="width: 15%;" aria-valuenow="15"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Partners and Inverstors report</td>
                                                <td>Deveint Inc</td>
                                                <td class="hidden-phone">30</td>
                                                <td class="vertical-align-mid">
                                                    <div class="progress">
                                                        <div data-transitiongoal="45"
                                                             class="progress-bar progress-bar-success"
                                                             style="width: 45%;" aria-valuenow="45"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>4</td>
                                                <td>New Company Takeover Review</td>
                                                <td>Deveint Inc</td>
                                                <td class="hidden-phone">28</td>
                                                <td class="vertical-align-mid">
                                                    <div class="progress">
                                                        <div data-transitiongoal="75"
                                                             class="progress-bar progress-bar-success"
                                                             style="width: 75%;" aria-valuenow="75"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div aria-labelledby="profile-tab" id="tab_content3" class="tab-pane fade"
                                         role="tabpanel">
                                        <p>xxFood truck fixie locavore, accusamus mcsweeney's marfa nulla single-origin
                                            coffee squid. Exercitation +1 labore velit, blog sartorial PBR leggings next
                                            level wes anderson artisan four loko farm-to-table craft beer twee. Qui
                                            photo booth letterpress, commodo enim craft beer mlkshk </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="hidden">
        {{ render(controller('ProjectBackBundle:User:avatar', {'id' : object.id })) }}
        {{ render(controller('ProjectBackBundle:User:background', {'id' : object.id })) }}
    </div>
{% endblock %}